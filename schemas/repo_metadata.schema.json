{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ai-platform-data/schemas/repo_metadata.schema.json",
  "title": "Repository Metadata Schema",
  "description": "JSON Schema for code repository metadata. Points to mirrored code in code-reference-engine.",
  "type": "object",
  "required": ["id", "name", "source_url", "target_path", "domain", "tier"],
  "additionalProperties": false,
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier (owner-repo format)",
      "pattern": "^[a-z0-9-]+$"
    },
    "name": {
      "type": "string",
      "description": "Display name"
    },
    "source_url": {
      "type": "string",
      "description": "Original GitHub URL",
      "format": "uri"
    },
    "target_path": {
      "type": "string",
      "description": "Path in code-reference-engine (e.g., game-dev/engines/godot)"
    },
    "owner": {
      "type": "string",
      "description": "Original owner/organization"
    },
    "license": {
      "type": "string",
      "enum": ["MIT", "Apache-2.0", "BSD-3-Clause", "BSD-2-Clause", "GPL-3.0", "GPL-2.0", "LGPL-3.0", "MPL-2.0", "AGPL-3.0", "Zlib", "BSL-1.0", "EPL-2.0", "PostgreSQL", "Unlicense", "SSPL", "Proprietary", "Epic-EULA", "Custom", "Unknown"]
    },
    "domain": {
      "type": "string",
      "enum": [
        "cpp-core", "cpp-math", "cpp-ecs",
        "game-dev-engines", "game-dev-unreal", "game-dev-systems", 
        "game-dev-rendering", "game-dev-physics", "game-dev-ai",
        "backend-frameworks", "backend-microservices", "backend-event-driven", 
        "backend-serverless", "backend-ddd",
        "frontend-frameworks", "frontend-micro-frontends",
        "infrastructure", "databases", "security", "monitoring", "testing",
        "ml-frameworks", "ml-ops", "ml-examples", "build-systems", "networking",
        "algorithms"
      ]
    },
    "tier": {
      "type": "string",
      "enum": ["T0-foundations", "T1-architecture", "T2-patterns", "T3-implementation", "T4-tooling", "T5-examples"]
    },
    "priority": {
      "type": "integer",
      "minimum": 1,
      "maximum": 10
    },
    "languages": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": ["cpp", "c", "python", "java", "csharp", "go", "rust", "javascript", "typescript", "ruby", "elixir", "scala", "kotlin", "php"]
      }
    },
    "concepts": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Key architectural concepts demonstrated"
    },
    "patterns": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Design patterns implemented"
    },
    "tags": {
      "type": "array",
      "items": { "type": "string" }
    },
    "description": {
      "type": "string"
    },
    "why_include": {
      "type": "string",
      "description": "Rationale for including this repo"
    },
    "estimated_size_mb": {
      "type": "integer",
      "minimum": 0
    },
    "mirrored": {
      "type": "boolean",
      "default": false
    },
    "indexed": {
      "type": "boolean",
      "default": false
    },
    "last_synced": {
      "type": "string",
      "format": "date-time"
    }
  }
}
